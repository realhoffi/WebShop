<!DOCTYPE html>
<html ng-app="appAusgabenmanager">
<head lang="de">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ausgabenmanager</title>
    <link href="../css/bootstrap.css" type="text/css" rel="stylesheet">
    <script src="../js/jquery-1.11.0.min.js" type="application/javascript"></script>
    <script src="../js/bootstrap.js" type="application/javascript"></script>
    <script src="../js/angular.js" type="application/javascript"></script>
    <script src="../js/ui-bootstrap-tpls-0.11.0.js" type="application/javascript"></script>
    <script src="../angular/app.js" type="application/javascript"></script>
    <script src="../angular/controller.js" type="application/javascript"></script>
    <script src="../angular/appHelper.js" type="application/javascript"></script>
    <script type="text/javascript">

        var uid = '';

        $(document).ready(function () {

            $("#uploadFile").click(function () {
                upload();
            });
        });
        function upload() {
            var fileContent = $("#fileInput")[0];
            var file = fileContent.files[0];
            var name = file.name;
            var size = file.size;
            var type = file.type;


            var reader = new FileReader();

            reader.onload = function (event) {
                console.log(event.target);
            };
            console.log(file);
            reader.readAsDataURL(file);

            var xhr = new XMLHttpRequest();
            xhr.upload.onprogress = function (e) {
                var percent = ((100 * e.loaded) / e.total);
                // Render a pretty progress bar
            };
            xhr.onreadystatechange = function (e) {
                if (e.target.readyState == 4) {
                    // Handle file upload complete
                    alert('ready');
                } else if (e.target.readyState == 2) {
                    alert(e.target.status + " : " + e.target.statusText);
                }
            };
            //  xhr.open('POST', 'http://localhost:54091/File/SaveFile?fid=' + name, true);
            xhr.open('POST', 'http://info.fhoffma.net/services/File/SaveFile?fid=' + name, true);
            xhr.setRequestHeader('X-FileName', name); // Pass the filename along
            xhr.send(file);
        }
    </script>
    <style type="text/css">
        .vcenter {
            display: inline-block;
            vertical-align: middle;
            float: none;
            border-color: #428bca;
        }

        .controlMaxSize {
            width: 100%;
        }

        .bs-info {
            border-color: #F0AD4E;
            border-style: solid;
            border-width: 10px;
            border-right-width: 1px;
            border-top-width: 1px;
            border-bottom-width: 1px;
            min-height: 100px;
            border-radius: 3px;
        }

        .bs-callout {
            padding: 20px;
            margin: 20px 0px;
        }

        .margin-top-10px {
            margin-top: 10px;
        }

        a {
            cursor: pointer;
        }

        .paddingRight10 {
            padding-right: 10px;
        }

        .white {
            color: #ffffff;
        }
    </style>
</head>
<body>
<div class="container-fluid" ng-controller="ausgabenCtrl">
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-primary row ">
            <div class="col-md-10">
                <h1 class="text-center">
                    <b> <span class="glyphicon glyphicon-tasks"></span>
                        <span> Ausgabenmanager</span></b>
                </h1>
            </div>
            <div class="col-md-2">
                <div class="btn-group margin-top-10px btn-group-justified ">
                    <div class="pull-right">
                        <button class="btn btn-primary " ng-show="!isUserLoggedIn()" ng-click="loginModal()">
                            <b> <span
                                    class="glyphicon glyphicon-user"></span> <span>Sign in</span></b>
                        </button>
                        <button class="btn btn-primary " ng-click="logout()" ng-show="isUserLoggedIn()">
                            <b><span class="glyphicon glyphicon-off"></span> <span>Logout</span></b>
                        </button>
                        <button class="btn btn-primary " ng-click="editUser('lg')" ng-show="isUserLoggedIn()">
                            <b><span class="glyphicon glyphicon-cog"></span> <span>Settings</span></b>
                        </button>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-2">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-success">
                    <a href="#" class="list-group-item active">
                        <b> <span class="glyphicon glyphicon-user"></span> <span>Zusammenfassung</span></b>
                    </a>
                    <a href="#" class="list-group-item">
                        <span class="glyphicon "></span> Meine monatlichenAusgaben
                    </a>
                    <a href="#" class="list-group-item">
                        <span class="glyphicon "></span> Meine monatlichenAusgaben
                    </a>
                    <a href="#" class="list-group-item">
                        <span class="glyphicon "></span> Kostenkalkulation
                    </a>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-success">
                    <a href="#" class="list-group-item active">
                        <b> <span class="glyphicon glyphicon-user"></span> <span>Charts</span></b>
                    </a>
                    <a href="#" class="list-group-item">
                        <span class="glyphicon "></span> Google
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10">
                <div class="panel panel-success">
                    <a href="#" class="list-group-item active">
                        <b> <span class="glyphicon glyphicon-star"></span> <span>Meine Favoriten</span></b>
                    </a>
                    <a href="#" class="list-group-item">
                        <span class="glyphicon "></span> Favorit 1
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8" id="content" ng-show="isUserLoggedIn()">
        <div class="row" ng-show="Ausgaben.length > 0">
            <div class="col-md-12">
                <div class=" panel col-md-offset-1">
                    <form class="form-horizontal bs-callout bs-info" role="form">
                        <div class="form-group">
                            <h4 class="col-md-2">
                                <b><span class="glyphicon glyphicon-search"></span> <span>Suche:</span></b>
                            </h4>

                            <div class="col-md-5">
                                <input class="form-control" ng-model="query" type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <h4 class="col-md-2">
                                <b><span>Sortieren:</span></b>
                            </h4>

                            <div class="col-md-5">
                                <select class="form-control" ng-model="orderProp">
                                    <option value="Beschreibung">Beschreibung</option>
                                    <option value="Name">Name</option>
                                    <option value="Ausgabezeitraum">Ausgabezeitraum</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="panel-group col-md-offset-1 " id="ausgabenAccordion"
                     ng-repeat="ausgabe in Ausgaben | filter:query | orderBy: orderProp">
                    <div class="panel panel-primary">
                        <div class="panel-heading ">
                            <div class="row">
                                <div class="col-md-10 pull-left">
                                    <a data-toggle="collapse" data-parent="#ausgabenAccordion"
                                       href="#acc{{ausgabe.ID}}">
                                        <h4>
                                            <b> <span class="white">
                                                {{ausgabe.Name}}</span></b>
                                        </h4>
                                    </a>

                                </div>
                                <div class="col-md-2 pull-right">
                                    <h4 class="pull-right">
                                        <b>
                                            <a>
                                                <span class="glyphicon glyphicon-pencil paddingRight10 white"
                                                      ng-click="editAusgabe(ausgabe)"></span>
                                            </a>
                                            <a>
                                                <span class="glyphicon glyphicon-trash paddingRight10 white"
                                                      ng-click="deleteAusgabe(ausgabe)"></span>
                                            </a>
                                        </b>
                                    </h4>

                                </div>
                            </div>
                        </div>
                        <div id="acc{{ausgabe.ID}}" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <form class="form-horizontal" role="form">
                                    <div class="form-group">
                                        <h4 class="col-sm-2">
                                            <span class=" label label-primary">Beschreibung:</span>
                                        </h4>

                                        <div class="col-sm-10">
                                            <span class="form-control">{{ ausgabe.Beschreibung }}</span>
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <h4 class="col-sm-2">
                                            <span class="label label-primary">Ausgabezeitraum:</span>
                                        </h4>

                                        <div class="col-sm-6">
                                            <span class="form-control">{{ findAusgabezeitraumById(ausgabe) }}</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h4 class="col-sm-2">
                                            <span class="label label-primary">Priorität:</span>
                                        </h4>

                                        <div class="col-sm-6">
                                            <span class="form-control">{{ findPrioritaetById(ausgabe) }}</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <h4 class="col-sm-2">
                                            <span class=" label label-primary">Preis:</span>
                                        </h4>

                                        <div class="col-sm-10">
                                            <span class="form-control">{{ ausgabe.Preis }}</span>
                                        </div>

                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12" ng-show="Ausgaben.length < 1">
                <div class="bs-callout bs-info">
                    <p>

                    <h3>
                        <span class="glyphicon glyphicon-thumbs-down"></span><span>  Sie haben noch keine Ausgaben angelegt.</span></br></br>
                        Klicken Sie auf <a ng-click="neueAusgabeModal('lg')">Neue Ausgabe</a>, um eine neue Ausgabe
                        anzulegen.</span>
                    </h3>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-8" ng-show="!isUserLoggedIn()">
        <div class="bs-callout bs-info">
            <p>

            <h2>
                <span class="glyphicon glyphicon-thumbs-down"></span><span>  Um diese Funktionen nutzen zu können, melden Sie sich bitte an...</span>
            </h2>
            </p>
        </div>
    </div>

    <div class="col-md-2" ng-show="isUserLoggedIn()">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-success">
                    <button class="btn btn-primary btn-lg btn-block" ng-click="neueAusgabeModal('lg')">Neue Ausgabe
                    </button>

                </div>
            </div>
        </div>
    </div>

</div>
<div class="row">
    <div class="panel-footer">
        <!--<div class="col-md-12 alert alert-info" ng-include="'../partials/userdetails.html'"></div>-->
    </div>
</div>
</div>
</body>
</html>